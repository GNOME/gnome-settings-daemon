[Unit]
Description=GNOME Freedesktop screensaver handling

Requisite=gnome-session-initialized.target
After=gnome-session-initialized.target
PartOf=gnome-session-initialized.target
Before=gnome-session.target

Conflicts=gnome-session@gnome-login.target
Conflicts=gnome-session@gnome-initial-setup.target

[Service]
Type=dbus
ExecStart=@libexecdir@/gsd-screensaver-proxy
Restart=on-failure
BusName=@plugin_dbus_name@

# We cannot use OnFailure as that may be called for dependency issues
ExecStopPost=@libexecdir@/gnome-session-ctl --fail-if-start-limit-hit

[Install]
WantedBy=gnome-session-initialized.target
