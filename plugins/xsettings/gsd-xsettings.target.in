[Unit]
Description=GNOME XSettings

Requisite=gnome-session-initialized.target
After=gnome-session-initialized.target
PartOf=gnome-session-initialized.target
Before=gnome-session.target

# Only start if an X server is running (either Xorg or Xwayland)
#Requisite=gnome-session-x11-.target
#After=gnome-session-x11-.target
#PartOf=gnome-session-x11-.target

[Service]
Type=dbus
ExecStart=@libexecdir@/gsd-xsettings
Restart=on-failure
BusName=@plugin_dbus_name@

# We cannot use OnFailure as that may be called for dependency issues
ExecStopPost=@libexecdir@/gnome-session-ctl --fail-if-start-limit-hit

[Install]
WantedBy=gnome-session-initialized.target
#WantedBy=gnome-session-x11-.target
